# ANAE Project - Cursor Rules

This is a Next.js 15 project with internationalization (i18n) support for the ANAE (AsociaciÃ³n Nacional de Argelinos en EspaÃ±a) website, including RTL support for Arabic.

## Core Architecture

- **Framework**: Next.js 15 with App Router
- **Internationalization**: next-intl for multi-language support (AR, ES, FR, EN)
- **RTL Support**: Full RTL layout support for Arabic language
- **Styling**: Tailwind CSS with custom design system
- **UI Components**: Radix UI primitives with custom styling
- **TypeScript**: Full TypeScript support

## Key Directories

### `/src/app/`
- Main application entry point
- `[locale]/` - Internationalized routes
- `layout.tsx` - Root layout with RTLProvider
- `globals.css` - Global styles with RTL support

### `/src/components/`
- Reusable UI components
- `Header/` - Navigation components (with 404 variants)
- `Hero/` - Landing page hero section
- `ui/` - Base UI components (buttons, inputs, etc.)
- `RTLProvider.tsx` - RTL detection and management

### `/src/i18n/`
- Internationalization configuration
- `routing.ts` - Locale routing setup (AR, ES, FR, EN)
- `navigation.ts` - Navigation helpers
- `request.ts` - Request handling

### `/src/lib/metadata/`
- SEO and metadata utilities
- `index.ts` - Complete metadata generation functions
- Generates Open Graph, Twitter Cards, hreflang, JSON-LD

### `/messages/`
- Translation files for each locale
- `ar.json`, `en.json`, `es.json`, `fr.json` - Language files
- Include `seo` section for each page's metadata translations

### `/public/images/`
- Static assets organized by category
- `hero/`, `events/`, `gallery/`, `icons/`, `logos/`
- `og/` - Open Graph images (1200x630px)

## File Naming Conventions

- Components: PascalCase (e.g., `Header.tsx`)
- Utilities: camelCase (e.g., `utils.ts`)
- Configuration: kebab-case (e.g., `next.config.ts`)
- Translation files: lowercase with locale (e.g., `ar.json`)

## RTL Support

### RTLProvider Component
- Automatically detects Arabic locale from URL (`/ar/*`)
- Updates `dir` and `lang` attributes dynamically
- Works for all pages including 404 pages

### RTL CSS Classes
- Use `rtl:space-x-reverse` for spacing in RTL
- Use `rtl:flex-row-reverse` for flex direction
- Use `rtl:text-right` for text alignment

### Component Structure for RTL
```tsx
// Always include RTL classes for spacing
<div className="flex items-center space-x-3 rtl:space-x-reverse">
  <Icon />
  <span>Text</span>
</div>
```

## Internationalization

### Supported Locales
- **Arabic (ar)**: RTL layout, first in routing array
- **Spanish (es)**: Default locale
- **French (fr)**: LTR layout
- **English (en)**: LTR layout

### Translation Structure
```json
{
  "language": {
    "name": "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
    "flag": "ðŸ‡©ðŸ‡¿"
  },
  "nav": {
    "home": "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
    "about": "Ù†Ø¨Ø°Ø© Ø¹Ù†Ø§"
  }
}
```

### Component Internationalization
```tsx
import { useTranslations } from 'next-intl';

export default function Component() {
  const t = useTranslations('nav');
  return <h1>{t('home')}</h1>;
}
```

## SEO and Metadata

### Metadata Requirements
**CRITICAL**: Every new page MUST have complete SEO metadata.

### Required Metadata Implementation
All pages in `/src/app/[locale]/*/page.tsx` must include:

```tsx
import { generateMetadata as generateSEOMetadata, type Locale } from '@/lib/metadata';
import { getTranslations } from 'next-intl/server';
import type { Metadata } from 'next';

interface PageProps {
  params: Promise<{ locale: string }>;
}

export async function generateMetadata({ params }: PageProps): Promise<Metadata> {
  const { locale } = await params;
  const t = await getTranslations({ locale, namespace: 'seo.pageName' });
  
  return generateSEOMetadata({
    locale: locale as Locale,
    title: t('title'),
    description: t('description'),
    keywords: t('keywords'),
    path: '/page-path',
    image: '/images/og/og-logo.png',
    imageAlt: t('imageAlt'),
    type: 'website', // or 'article' for blog posts
  });
}
```

### Translation Files
Add SEO translations in all 4 language files (`/messages/{locale}.json`):

```json
{
  "seo": {
    "pageName": {
      "title": "Page Title (50-60 chars)",
      "description": "Engaging description (150-160 chars)",
      "keywords": "keyword1, keyword2, keyword3",
      "imageAlt": "Image description"
    }
  }
}
```

### Metadata Checklist
Before creating a new page, ensure:
- [ ] `generateMetadata()` function is implemented
- [ ] SEO translations added in all 4 languages (ar, es, fr, en)
- [ ] Title is 50-60 characters
- [ ] Description is 150-160 characters
- [ ] Keywords are relevant and specific
- [ ] Open Graph image is specified
- [ ] Path matches the route
- [ ] Type is correct (website or article)

### Special Cases

#### Blog Articles
Use the article's own image:
```tsx
return generateSEOMetadata({
  // ... other params
  image: post.image, // Article's image
  type: 'article',
  author: post.author,
  publishedTime: post.date,
});
```

#### JSON-LD for Special Pages
Add structured data when applicable:
- **FAQ pages**: Use `generateFAQJsonLd()`
- **Contact pages**: Use `generateContactPageJsonLd()`
- **Blog articles**: Use `generateArticleJsonLd()`

Example:
```tsx
export default async function Page({ params }: PageProps) {
  const jsonLd = generateFAQJsonLd(faqData);
  
  return (
    <>
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}
      />
      {/* Page content */}
    </>
  );
}
```

### Resources
- Utility functions: `/src/lib/metadata/index.ts`
- Example implementations: Check existing pages in `/src/app/[locale]/`

### Why This Matters
- **SEO**: Better ranking in search engines
- **Social Sharing**: Attractive previews on Facebook, Twitter, WhatsApp
- **Multilingual**: Proper hreflang and canonical URLs
- **Rich Snippets**: Structured data for Google
- **User Experience**: Better discoverability

## Component Patterns

### Header Components
- `Header.tsx` - Main header for normal pages
- `Header404.tsx` - Header for 404 pages
- `TopBar.tsx` / `TopBar404.tsx` - Top bar components
- `Navigation.tsx` / `Navigation404.tsx` - Navigation components

### RTL-Aware Components
All components must support RTL:
```tsx
// Good: RTL-aware spacing
<div className="flex items-center space-x-4 rtl:space-x-reverse">

// Good: RTL-aware flex direction
<div className="flex flex-row rtl:flex-row-reverse">
```

## Styling Conventions

### Design Philosophy
- **NO startup-like or tech-style design**: Avoid modern tech startup aesthetics, minimalist gradients, or overly futuristic UI elements
- **Prefer traditional, professional, and cultural-appropriate designs** that reflect the association's values
- Use warm, welcoming colors and classic layouts suitable for a cultural association
- Avoid flashy animations, neon colors, or overly trendy design patterns

### RTL-Specific Styles
```css
/* RTL Support in globals.css */
[dir="rtl"] {
  direction: rtl;
}

[dir="rtl"] .space-x-3 > * + * {
  margin-left: 0;
  margin-right: 0.75rem;
}
```

### Tailwind RTL Classes
- `rtl:space-x-reverse` - Reverse horizontal spacing
- `rtl:flex-row-reverse` - Reverse flex direction
- `rtl:text-right` - Right text alignment
- `rtl:text-left` - Left text alignment

## Key Files

- [next.config.ts](mdc:next.config.ts) - Next.js configuration with i18n plugin
- [middleware.ts](mdc:src/middleware.ts) - Internationalization middleware
- [routing.ts](mdc:src/i18n/routing.ts) - Locale routing configuration
- [RTLProvider.tsx](mdc:src/components/RTLProvider.tsx) - RTL detection component
- [metadata/index.ts](mdc:src/lib/metadata/index.ts) - SEO metadata utilities
- [tailwind.config.ts](mdc:tailwind.config.ts) - Tailwind CSS configuration
- [components.json](mdc:components.json) - UI component configuration

## Development Guidelines

### RTL Testing
- Always test Arabic pages (`/ar/*`) for RTL layout
- Verify navbar and topbar are properly reversed
- Check spacing and alignment in RTL mode
- Test 404 pages for RTL consistency

### Component Development
1. **Always include RTL support** for new components
2. **Always add SEO metadata** for new pages using `generateSEOMetadata()`
3. **Use semantic translation keys** (e.g., `nav.home` not `text1`)
4. **Test all locales** - Ensure UI works with different text lengths
5. **Follow component patterns** - Use composition over inheritance
6. **Include proper TypeScript types** for all props

### File Organization
- Group related components in folders (e.g., `Header/`)
- Create 404 variants for components that need them
- Use consistent naming conventions
- Keep RTL classes consistent across components

## Best Practices

1. **RTL First**: Always consider RTL when building components
2. **SEO Mandatory**: Every new page MUST have complete metadata (title, description, keywords, Open Graph)
3. **No Startup/Tech Design**: Avoid startup-like or tech-style aesthetics - prefer traditional, professional, cultural-appropriate designs
4. **Multilingual SEO**: Add SEO translations in all 4 languages (ar, es, fr, en)
5. **Consistent Spacing**: Use `rtl:space-x-reverse` for all horizontal spacing
6. **Semantic HTML**: Use proper HTML elements for accessibility
7. **Translation Keys**: Use descriptive, nested translation keys
8. **Component Variants**: Create 404 variants when needed
9. **Testing**: Test all locales and RTL layouts
10. **Performance**: Use React.memo for expensive components
11. **Accessibility**: Include proper ARIA attributes and semantic HTML
12. **Structured Data**: Add JSON-LD when applicable (FAQ, Contact, Articles)
